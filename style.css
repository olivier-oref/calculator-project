/* Jungle Theme Color System */
:root {
    /* Jungle theme colors inspired by rich greens and earth tones */
    --md-sys-color-primary: #4A7C59;          /* Deep forest green */
    --md-sys-color-on-primary: #FFFFFF;
    --md-sys-color-primary-container: #A8D5B7; /* Light sage green */
    --md-sys-color-on-primary-container: #1B3A22;
    --md-sys-color-secondary: #6B5B3D;        /* Warm brown */
    --md-sys-color-secondary-container: #E8DCC6; /* Light tan */
    --md-sys-color-surface: #F5F3E7;          /* Warm off-white */
    --md-sys-color-surface-variant: #E2DCC6;  /* Warm beige */
    --md-sys-color-on-surface: #2D2B1F;       /* Dark brown text */
    --md-sys-color-on-surface-variant: #5A5640;
    --md-sys-color-outline: #8A8064;          /* Muted olive */
    --md-sys-color-outline-variant: #C7C1A8;
    --md-sys-color-error: #B85450;            /* Rusty red */
    
    /* Typography scale */
    --md-sys-typescale-display-large: 57px;
    --md-sys-typescale-display-medium: 45px;
    --md-sys-typescale-display-small: 36px;
    --md-sys-typescale-headline-large: 32px;
    --md-sys-typescale-headline-medium: 28px;
    --md-sys-typescale-title-large: 22px;
    --md-sys-typescale-label-large: 14px;
    --md-sys-typescale-body-large: 16px;
    
    /* Motion - MD3 standard easing curves */
    --md-sys-motion-duration-short: 100ms;
    --md-sys-motion-duration: 250ms;
    --md-sys-motion-duration-long: 500ms;
    --md-sys-motion-easing: cubic-bezier(0.2, 0, 0, 1);           /* Standard easing */
    --md-sys-motion-easing-emphasized: cubic-bezier(0.3, 0, 0.8, 0.15); /* Emphasized easing */
    --md-sys-motion-easing-decelerated: cubic-bezier(0, 0, 0.2, 1);     /* Decelerated easing */
    --md-sys-motion-easing-accelerated: cubic-bezier(0.3, 0, 1, 1);     /* Accelerated easing */
    
    /* Elevation */
    --md-sys-elevation-0: none;
    --md-sys-elevation-1: 0 1px 2px rgba(0, 0, 0, 0.3), 
                          0 1px 3px 1px rgba(0, 0, 0, 0.15);
    --md-sys-elevation-2: 0 1px 2px rgba(0, 0, 0, 0.3),
                          0 2px 6px 2px rgba(0, 0, 0, 0.15);
    --md-sys-elevation-3: 0 4px 8px 3px rgba(0, 0, 0, 0.15),
                          0 1px 3px rgba(0, 0, 0, 0.3);
}

/* Jungle Dark Mode - deeper, richer jungle colors */
@media (prefers-color-scheme: dark) {
    :root {
        --md-sys-color-primary: #7BB68A;        /* Bright jungle green */
        --md-sys-color-on-primary: #1B3A22;
        --md-sys-color-primary-container: #335543; /* Dark forest green */
        --md-sys-color-on-primary-container: #A8D5B7;
        --md-sys-color-secondary: #C8B99C;      /* Light wood */
        --md-sys-color-secondary-container: #4A4137; /* Dark brown */
        --md-sys-color-surface: #1F1E16;        /* Very dark jungle floor */
        --md-sys-color-surface-variant: #2B2A20; /* Dark earth */
        --md-sys-color-on-surface: #E8E2D0;     /* Light cream text */
        --md-sys-color-on-surface-variant: #C7C1A8;
        --md-sys-color-outline: #8A8064;
        --md-sys-color-outline-variant: #3D3B2E;
        --md-sys-color-error: #D67C78;          /* Soft coral */
    }
    
    /* Dark mode background */
    body {
        background: linear-gradient(135deg, #1A2E17 0%, #2D4A22 50%, #3A5A2F 100%);
    }
}

/* Global styles */
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

body {
    font-family: 'Roboto', sans-serif;
    background: linear-gradient(135deg, #2D4A22 0%, #4A7C59 50%, #6B8E5A 100%);
    color: var(--md-sys-color-on-surface);
    min-height: 100vh;
    display: flex;
    justify-content: center;
    align-items: center;
    padding: 20px;
    transition: 
        background var(--md-sys-motion-duration-long) var(--md-sys-motion-easing-decelerated),
        color var(--md-sys-motion-duration) var(--md-sys-motion-easing);
}

/* Calculator container with load animation */
.calculator {
    background: linear-gradient(145deg, var(--md-sys-color-surface) 0%, var(--md-sys-color-surface-variant) 100%);
    border-radius: 28px;
    padding: 24px;
    box-shadow: var(--md-sys-elevation-1);
    width: 100%;
    max-width: 380px;
    transition: 
        background var(--md-sys-motion-duration) var(--md-sys-motion-easing),
        box-shadow var(--md-sys-motion-duration-short) var(--md-sys-motion-easing),
        border-color var(--md-sys-motion-duration) var(--md-sys-motion-easing);
    border: 1px solid rgba(139, 128, 100, 0.2);
    position: relative;
    opacity: 0;
    transform: translateY(20px);
    animation: fadeInUp var(--md-sys-motion-duration-long) var(--md-sys-motion-easing-decelerated) forwards;
}

/* Page load fade-in animation */
@keyframes fadeInUp {
    0% {
        opacity: 0;
        transform: translateY(20px);
    }
    100% {
        opacity: 1;
        transform: translateY(0);
    }
}

/* Enhanced elevation for jungle theme */
@media (prefers-color-scheme: light) {
    .calculator {
        box-shadow: 
            0 1px 2px rgba(29, 58, 34, 0.3),
            0 1px 3px 1px rgba(29, 58, 34, 0.15),
            0 8px 24px rgba(29, 58, 34, 0.1);
    }
}

@media (prefers-color-scheme: dark) {
    .calculator {
        box-shadow: 
            0 1px 2px rgba(0, 0, 0, 0.5),
            0 1px 3px 1px rgba(0, 0, 0, 0.3),
            0 8px 24px rgba(0, 0, 0, 0.2);
    }
}

/* Display area with jungle styling */
.display {
    background: linear-gradient(145deg, var(--md-sys-color-surface) 0%, #F0EDE1 100%);
    border-radius: 16px;
    padding: 24px;
    margin-bottom: 24px;
    text-align: right;
    min-height: 100px;
    display: flex;
    align-items: center;
    justify-content: flex-end;
    box-shadow: 
        inset 0 2px 4px rgba(90, 86, 64, 0.1),
        inset 0 -1px 0 rgba(255, 255, 255, 0.3);
    border: 1px solid rgba(139, 128, 100, 0.15);
}

/* Display text with smooth transitions */
.display-text {
    font-size: var(--md-sys-typescale-display-medium);
    font-weight: 400;
    color: var(--md-sys-color-on-surface);
    line-height: 1.2;
    word-wrap: break-word;
    word-break: break-all;
    max-width: 100%;
    transition: 
        opacity var(--md-sys-motion-duration-short) var(--md-sys-motion-easing),
        transform var(--md-sys-motion-duration-short) var(--md-sys-motion-easing);
}

/* Display fade transition classes */
.display-text.fade-out {
    opacity: 0;
    transform: translateY(-10px);
}

.display-text.fade-in {
    opacity: 1;
    transform: translateY(0);
}

/* Error shake animation */
.display-text.shake {
    animation: shake 0.5s var(--md-sys-motion-easing-emphasized);
}

@keyframes shake {
    0%, 100% { transform: translateX(0); }
    10%, 30%, 50%, 70%, 90% { transform: translateX(-5px); }
    20%, 40%, 60%, 80% { transform: translateX(5px); }
}

/* Button grid */
.buttons {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    grid-template-rows: repeat(5, 1fr);
    gap: 12px;
}

.empty-space {
    visibility: hidden;
}

/* Base button styles with ripple support and enhanced shadows */
.button {
    font-family: 'Roboto', sans-serif;
    font-size: var(--md-sys-typescale-title-large);
    font-weight: 500;
    border: none;
    border-radius: 12px;
    height: 64px;
    cursor: pointer;
    transition: all var(--md-sys-motion-duration) var(--md-sys-motion-easing);
    position: relative;
    overflow: hidden;
    display: flex;
    align-items: center;
    justify-content: center;
    user-select: none;
    -webkit-tap-highlight-color: transparent;
    transform-origin: center;
}

/* Enhanced focus styles for accessibility */
.button:focus-visible {
    outline: 2px solid var(--md-sys-color-primary);
    outline-offset: 2px;
}

.button:focus:not(:focus-visible) {
    outline: none;
}

/* Enhanced ripple effect from click point */
.button::before {
    content: '';
    position: absolute;
    top: var(--ripple-y, 50%);
    left: var(--ripple-x, 50%);
    border-radius: 50%;
    background: rgba(255, 255, 255, 0.3);
    width: 0;
    height: 0;
    transform: translate(-50%, -50%);
    transition: width 0.6s var(--md-sys-motion-easing), 
                height 0.6s var(--md-sys-motion-easing),
                opacity 0.3s var(--md-sys-motion-easing);
    pointer-events: none;
}

.button.ripple-active::before {
    animation: ripple 0.6s var(--md-sys-motion-easing);
}

@keyframes ripple {
    0% {
        width: 0;
        height: 0;
        opacity: 0.3;
    }
    50% {
        opacity: 0.2;
    }
    100% {
        width: 200px;
        height: 200px;
        opacity: 0;
    }
}

/* State layer for focus and hover */
.button::after {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(255, 255, 255, 0);
    border-radius: 12px;
    transition: background var(--md-sys-motion-duration-short) var(--md-sys-motion-easing);
    pointer-events: none;
}

.button:hover::after {
    background: rgba(255, 255, 255, 0.08);
}

.button:focus::after {
    background: rgba(255, 255, 255, 0.12);
}

/* Button press scale animation */
.button:active {
    transform: scale(0.95);
    transition: transform 0.1s var(--md-sys-motion-easing-emphasized);
}

.button {
    transform-origin: center;
}

/* Number buttons - Text variant (subtle, minimal) */
.button-number {
    background: linear-gradient(145deg, var(--md-sys-color-surface) 0%, #F0EDE1 100%);
    color: var(--md-sys-color-on-surface);
    box-shadow: 
        0 1px 2px rgba(90, 86, 64, 0.1),
        inset 0 1px 0 rgba(255, 255, 255, 0.15);
    border: 1px solid rgba(139, 128, 100, 0.1);
    font-weight: 400;
}

.button-number:hover {
    background: linear-gradient(145deg, var(--md-sys-color-surface-variant) 0%, #E8DCC6 100%);
    box-shadow: 
        0 4px 8px rgba(90, 86, 64, 0.2),
        inset 0 1px 0 rgba(255, 255, 255, 0.3);
}

.button-number:active {
    transform: scale(0.95);
}

/* Operator buttons - Tonal variant (prominent but not primary) */
.button-operator {
    background: linear-gradient(145deg, var(--md-sys-color-secondary-container) 0%, #DFD1B5 100%);
    color: var(--md-sys-color-secondary);
    box-shadow: 
        0 2px 4px rgba(107, 91, 61, 0.2),
        inset 0 1px 0 rgba(255, 255, 255, 0.2);
    border: 1px solid rgba(107, 91, 61, 0.2);
    font-weight: 500;
}

.button-operator:hover {
    background: linear-gradient(145deg, #E8DCC6 0%, #D4C7AA 100%);
    box-shadow: 
        0 4px 8px rgba(107, 91, 61, 0.25),
        inset 0 1px 0 rgba(255, 255, 255, 0.3);
}

.button-operator:active {
    transform: scale(0.95);
}

/* Clear button */
.button-clear {
    background-color: var(--md-sys-color-error);
    color: #FFFFFF;
}

.button-clear:hover {
    opacity: 0.9;
}

.button-clear:active {
    transform: scale(0.95);
}

/* Delete button */
.button-delete {
    background-color: var(--md-sys-color-secondary-container);
    color: var(--md-sys-color-on-surface);
}

.button-delete:hover {
    opacity: 0.9;
}

.button-delete:active {
    transform: scale(0.95);
}

.button-delete .material-symbols-outlined {
    font-size: 24px;
}

/* Equals button - Filled variant (most prominent action) */
.button-equals {
    background: linear-gradient(145deg, var(--md-sys-color-primary) 0%, #3A6B47 100%);
    color: var(--md-sys-color-on-primary);
    box-shadow: 
        0 3px 6px rgba(74, 124, 89, 0.3),
        inset 0 1px 0 rgba(255, 255, 255, 0.2);
    border: 1px solid rgba(27, 58, 34, 0.3);
    font-weight: 600;
}

.button-equals:hover {
    background: linear-gradient(145deg, #4A7C59 0%, var(--md-sys-color-primary-container) 100%);
    color: var(--md-sys-color-on-primary-container);
    box-shadow: 
        0 4px 8px rgba(74, 124, 89, 0.4),
        inset 0 1px 0 rgba(255, 255, 255, 0.3);
}

.button-equals:active {
    transform: scale(0.95);
}

/* Zero button - no special spanning needed in this layout */
.button-zero {
}

/* Decimal button */
.button-decimal {
    background-color: var(--md-sys-color-surface);
    color: var(--md-sys-color-on-surface);
}

.button-decimal:hover {
    background-color: var(--md-sys-color-surface-variant);
}

.button-decimal:active {
    transform: scale(0.95);
}

/* Responsive 4-column grid layout */
.buttons {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    grid-template-rows: repeat(5, 1fr);
    gap: 12px;
}

/* Mobile responsive (< 600px) - Enhanced for touch */
@media (max-width: 599px) {
    .calculator {
        padding: 16px;
        border-radius: 20px;
        max-width: 360px;
        width: calc(100vw - 32px);
    }
    
    .display {
        padding: 20px 16px;
        min-height: 90px;
    }
    
    .display-text {
        font-size: clamp(24px, 8vw, 36px);
        line-height: 1.1;
    }
    
    .buttons {
        gap: 10px;
    }
    
    .button {
        height: 60px;
        min-height: 48px;
        font-size: var(--md-sys-typescale-headline-medium);
        border-radius: 16px;
    }
}

/* Tablet responsive (600px - 1024px) - Optimized for tablets */
@media (min-width: 600px) and (max-width: 1024px) {
    .calculator {
        max-width: 450px;
        padding: 28px;
    }
    
    .display {
        padding: 28px;
        min-height: 110px;
    }
    
    .display-text {
        font-size: clamp(36px, 6vw, 48px);
    }
    
    .buttons {
        gap: 16px;
    }
    
    .button {
        height: 72px;
        min-height: 48px;
        font-size: var(--md-sys-typescale-title-large);
        border-radius: 14px;
    }
}

/* Desktop (> 1024px) */
@media (min-width: 1025px) {
    .calculator {
        max-width: 420px;
        padding: 32px;
    }
    
    .display {
        padding: 32px 28px;
        min-height: 120px;
    }
    
    .display-text {
        font-size: var(--md-sys-typescale-display-medium);
    }
    
    .buttons {
        gap: 18px;
    }
    
    .button {
        height: 76px;
        font-size: var(--md-sys-typescale-title-large);
        border-radius: 12px;
    }
}

/* Landscape orientation optimizations */
@media (orientation: landscape) and (max-height: 500px) {
    .calculator {
        max-width: 600px;
        padding: 16px;
    }
    
    .display {
        min-height: 60px;
        padding: 16px;
    }
    
    .display-text {
        font-size: clamp(20px, 4vh, 28px);
    }
    
    .buttons {
        gap: 8px;
    }
    
    .button {
        height: clamp(40px, 8vh, 56px);
        min-height: 40px;
    }
    
    body {
        padding: 10px;
    }
}

/* Ensure touch targets are at least 48dp on mobile (portrait) */
@media (pointer: coarse) and (orientation: portrait) {
    .button {
        min-height: 48px;
    }
}

/* Prevent zoom on mobile */
@media (max-width: 599px) {
    input, select, textarea {
        font-size: 16px !important;
    }
    
    /* Prevent double-tap zoom */
    * {
        touch-action: manipulation;
    }
}